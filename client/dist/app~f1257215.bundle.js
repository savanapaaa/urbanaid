/*! For license information please see app~f1257215.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkurbanaid=self.webpackChunkurbanaid||[]).push([[927],{4017:function(e,t,n){n(2675),n(9463),n(6412),n(2259),n(5700),n(8125),n(8706),n(2008),n(4423),n(3792),n(8598),n(2062),n(4782),n(9572),n(2010),n(4731),n(479),n(8130),n(9868),n(3851),n(1278),n(875),n(9432),n(287),n(6099),n(3362),n(7764),n(8156),n(2762),n(3500),n(2953),n(3296),n(7208),n(8408);var a=n(9276),r=n(7849),o=n(32),i=n(3301),s=n(2487),l=n(7742),u=n(6296),c=n(8353);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=d(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==d(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(){g=function(){return t};var e,t={},n=Object.prototype,a=n.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function c(e,t,n,a){var o=t&&t.prototype instanceof x?t:x,i=Object.create(o.prototype),s=new P(a||[]);return r(i,"_invoke",{value:O(e,n,s)}),i}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var f="suspendedStart",m="suspendedYield",v="executing",h="completed",b={};function x(){}function y(){}function w(){}var k={};u(k,i,(function(){return this}));var L=Object.getPrototypeOf,E=L&&L(L(F([])));E&&E!==n&&a.call(E,i)&&(k=E);var S=w.prototype=x.prototype=Object.create(k);function j(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function B(e,t){function n(r,o,i,s){var l=p(e[r],e,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==d(c)&&a.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,i,s)}),(function(e){n("throw",e,i,s)})):t.resolve(c).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,s)}))}s(l.arg)}var o;r(this,"_invoke",{value:function(e,a){function r(){return new t((function(t,r){n(e,a,t,r)}))}return o=o?o.then(r,r):r()}})}function O(t,n,a){var r=f;return function(o,i){if(r===v)throw Error("Generator is already running");if(r===h){if("throw"===o)throw i;return{value:e,done:!0}}for(a.method=o,a.arg=i;;){var s=a.delegate;if(s){var l=D(s,a);if(l){if(l===b)continue;return l}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(r===f)throw r=h,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);r=v;var u=p(t,n,a);if("normal"===u.type){if(r=a.done?h:m,u.arg===b)continue;return{value:u.arg,done:a.done}}"throw"===u.type&&(r=h,a.method="throw",a.arg=u.arg)}}}function D(t,n){var a=n.method,r=t.iterator[a];if(r===e)return n.delegate=null,"throw"===a&&t.iterator.return&&(n.method="return",n.arg=e,D(t,n),"throw"===n.method)||"return"!==a&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+a+"' method")),b;var o=p(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,b;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,b):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function F(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function n(){for(;++r<t.length;)if(a.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(d(t)+" is not iterable")}return y.prototype=w,r(S,"constructor",{value:w,configurable:!0}),r(w,"constructor",{value:y,configurable:!0}),y.displayName=u(w,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,u(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},j(B.prototype),u(B.prototype,s,(function(){return this})),t.AsyncIterator=B,t.async=function(e,n,a,r,o){void 0===o&&(o=Promise);var i=new B(c(e,n,a,r),o);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},j(S),u(S,l,"Generator"),u(S,i,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function e(){for(;n.length;){var a=n.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},t.values=F,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(a,r){return s.type="throw",s.arg=t,n.next=a,r&&(n.method="next",n.arg=e),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var l=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;T(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(t,n,a){return this.delegate={iterator:F(t),resultName:n,nextLoc:a},"next"===this.method&&(this.arg=e),b}},t}function v(e,t,n,a,r,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,r)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function i(e){v(o,a,r,i,s,"next",e)}function s(e){v(o,a,r,i,s,"throw",e)}i(void 0)}))}}var b={formData:{judul:"",deskripsi:"",jenisInfrastruktur:"",tanggalKejadian:"",alamatKejadian:"",lampiran:null},infraInfo:{perkotaan:"Jalan, jembatan, gedung pemerintahan, fasilitas umum yang mendukung aktivitas perkotaan.",lingkungan:"Sistem drainase, pengolahan air bersih, pengelolaan sampah, dan infrastruktur ramah lingkungan.",sosial:"Fasilitas kesehatan, pendidikan, ruang publik dan sarana sosial kemasyarakatan."},formatDate:function(e){var t=new Date("".concat(e,"T00:00:00+07:00")),n=["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"][t.getDay()],a=String(t.getDate()).padStart(2,"0"),r=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"][t.getMonth()],o=t.getFullYear();return"".concat(n,", ").concat(a," ").concat(r," ").concat(o)},init:function(){var e=this;return h(g().mark((function t(){return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,u.A.show(),t.next=4,e.renderPage();case 4:e.initializeEventListeners(),e.initializeAOS(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0);case 11:return t.prev=11,u.A.hide(),t.finish(11);case 15:case"end":return t.stop()}}),t,null,[[0,8,11,15]])})))()},initializeAOS:function(){AOS.init({duration:1e3,once:!0,offset:50,delay:100})},renderPage:function(){return h(g().mark((function e(){var t,n,l,u,c,d,p,f,m,v,h;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.querySelector("#app"),n=window.location.pathname,l='\n            <div class="flex flex-col sm:flex-row sm:flex-wrap sm:justify-center gap-2 sm:gap-3 mb-8 px-4" data-aos="fade-up" data-aos-duration="800">\n                <a href="/pelaporan" class="w-full sm:w-auto px-6 py-3 rounded-2xl font-semibold cursor-pointer transition-all duration-300 text-center '.concat("/pelaporan"===n||"/pelaporan/"===n?"bg-gradient-to-r from-[#00899B] to-[#002F35] text-white":"bg-gray-100 text-gray-700",'">\n                    Beranda\n                </a>\n                <a href="/pelaporan/laporanaktif" class="w-full sm:w-auto px-6 py-3 rounded-2xl font-semibold cursor-pointer transition-all duration-300 text-center ').concat("/pelaporan/laporanaktif"===n?"bg-gradient-to-r from-[#00899B] to-[#002F35] text-white":"bg-gray-100 text-gray-700",'">\n                    Laporan Aktif\n                </a>\n                <a href="/pelaporan/riwayat" class="w-full sm:w-auto px-6 py-3 rounded-2xl font-semibold cursor-pointer transition-all duration-300 text-center ').concat("/pelaporan/riwayat"===n?"bg-gradient-to-r from-[#00899B] to-[#002F35] text-white":"bg-gray-100 text-gray-700",'">\n                    Riwayat\n                </a>\n                <a href="/pelaporan/profile" class="w-full sm:w-auto px-6 py-3 rounded-2xl font-semibold cursor-pointer transition-all duration-300 text-center ').concat("/pelaporan/profile"===n?"bg-gradient-to-r from-[#00899B] to-[#002F35] text-white":"bg-gray-100 text-gray-700",'">\n                    Profile\n                </a>\n            </div>\n        '),u="\n            ".concat((0,a.F)(),'\n            <div class="w-full max-w-7xl mx-auto px-4 lg:px-8">\n                ').concat('\n            <div class="text-center mb-8 mt-12 px-4" data-aos="fade-up" data-aos-duration="1000">\n                <h1 class="text-2xl lg:text-3xl font-bold text-gray-900 mb-2 leading-snug">Platform Digital untuk Pengaduan Masyarakat</h1>\n                <p class="text-base lg:text-lg text-gray-600 leading-relaxed">Laporkan Permasalahan Anda Secara Langsung</p>\n            </div>\n        ',"\n                ").concat(l,'\n                <div class="w-full">\n        '),"/pelaporan/laporanaktif"!==n){e.next=12;break}return e.t0=u,e.next=9,o.A.render();case 9:u=e.t0+=e.sent,e.next=20;break;case 12:if("/pelaporan/riwayat"!==n){e.next=19;break}return e.t1=u,e.next=16,i.A.render();case 16:u=e.t1+=e.sent,e.next=20;break;case 19:u+="/pelaporan/profile"===n?s.A.render():'\n                <div class="relative max-w-3xl mx-auto mb-10" data-aos="fade-up" data-aos-duration="1200">\n    <div class="absolute inset-0 bg-gradient-to-r from-[#00899B]/20 to-[#002F35]/20 rounded-3xl blur-2xl transform -rotate-1"></div>\n    \n    <div class="relative bg-white/80 backdrop-blur-xl rounded-2xl p-8 md:p-10 shadow-xl">\n        <form id="laporan-form" class="w-full" novalidate>\n            <h2 class="text-xl lg:text-2xl font-bold text-gray-900 mb-6 text-center">Sampaikan Laporan Anda</h2>\n            \n            <div class="mb-5" data-aos="fade-up" data-aos-delay="100">\n                <label for="judul" class="block font-semibold mb-2 text-sm text-gray-700">Judul Laporan</label>\n                <input type="text" id="judul" name="judul" placeholder="Masukkan Judul" \n                       class="w-full px-3 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-[#00899B] text-base text-gray-900 placeholder-gray-500">\n            </div>\n            \n            <div class="mb-5" data-aos="fade-up" data-aos-delay="200">\n                <label for="deskripsi" class="block font-semibold mb-2 text-sm text-gray-700">Deskripsi Laporan</label>\n                <textarea id="deskripsi" name="deskripsi" placeholder="Masukkan Deskripsi" \n                          class="w-full px-3 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-[#00899B] text-base text-gray-900 placeholder-gray-500 min-h-[100px] resize-y"></textarea>\n            </div>\n            \n            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-5">\n                <div class="relative" data-aos="fade-up" data-aos-delay="300">\n                    <label for="jenisInfrastruktur" class="block font-semibold mb-2 text-sm text-gray-700">\n                        Jenis Infrastruktur \n                        <button type="button" \n                                class="inline-flex items-center justify-center w-[18px] h-[18px] rounded-full bg-gradient-to-r from-[#00899B] to-[#002F35] text-white text-xs ml-2 cursor-pointer" \n                                id="infoIcon"\n                                aria-label="Info infrastruktur">\n                            i\n                        </button>\n                    </label>\n                    <select id="jenisInfrastruktur" name="jenisInfrastruktur" \n                            class="w-full px-3 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-[#00899B] text-base text-gray-900 appearance-none">\n                        <option value="">Pilih Jenis Infrastruktur</option>\n                        <option value="Infrastruktur Perkotaan">Infrastruktur Perkotaan</option>\n                        <option value="Infrastruktur Lingkungan">Infrastruktur Lingkungan</option>\n                        <option value="Infrastruktur Sosial">Infrastruktur Sosial</option>\n                    </select>\n                    \n                    <div id="infraInfo" \n                         class="hidden fixed md:absolute left-0 right-0 md:w-auto bg-white p-4 rounded-lg shadow-lg z-50 border border-gray-200 transition-opacity duration-200 opacity-0"\n                         style="top: 100%; margin-top: 0.5rem;">\n                        <div class="relative">\n                            <div class="text-sm text-gray-600 max-w-sm"></div>\n                            <button type="button"\n                                    class="md:hidden absolute top-0 right-0 p-2 text-gray-500 hover:text-gray-700"\n                                    id="closeInfraInfo">\n                                <span class="material-icons-round">close</span>\n                            </button>\n                        </div>\n                    </div>\n                </div>\n\n                <div data-aos="fade-up" data-aos-delay="400">\n                    <label for="tanggalKejadian" class="block font-semibold mb-2 text-sm text-gray-700">Tanggal Kejadian</label>\n                    <input type="date" id="tanggalKejadian" name="tanggalKejadian"\n                           class="w-full px-3 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-[#00899B] text-base text-gray-900 appearance-none">\n                </div>\n            </div>\n            \n<div class="mb-5" data-aos="fade-up" data-aos-delay="500">\n    <label for="alamatKejadian" class="block font-semibold mb-2 text-sm text-gray-700">Alamat Kejadian</label>\n    <div class="relative">\n        <input type="text" \n               id="alamatKejadian" \n               name="alamatKejadian" \n               placeholder="Masukkan alamat kejadian" \n               autocomplete="off"\n               class="w-full px-3 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-[#00899B] text-base text-gray-900 placeholder-gray-500">\n        <div id="alamatSuggestions" \n             class="hidden absolute left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-50 max-h-60 overflow-y-auto">\n        </div>\n    </div>\n</div>\n            \n            <div class="mb-5" data-aos="fade-up" data-aos-delay="600">\n                <label class="block font-semibold mb-2 text-sm text-gray-700">Bukti Lampiran</label>\n                <div class="border-2 border-dashed border-[#00899B] rounded-lg p-5 text-center cursor-pointer transition-all duration-300" id="dropZone">\n                    <input type="file" id="fileInput" name="buktiLampiran" accept="image/*" class="hidden">\n                    <div class="upload-content">\n                        <div class="mb-3">\n                            <span class="material-icons-round text-4xl text-[#00899B]">cloud_upload</span>\n                        </div>\n                        <div class="mb-3">\n                            <p class="font-semibold text-gray-800 mb-1 text-base">Drag and drop files or</p>\n                            <button type="button" class="text-[#00899B] font-semibold underline text-base hover:text-[#002F35] browse-button">Browse files</button>\n                        </div>\n                        <p class="text-sm text-gray-600">Supported formats: JPEG, PNG (Max 5MB)</p>\n                    </div>\n                </div>\n            </div>\n            \n            <div class="text-center mt-6" data-aos="fade-up" data-aos-delay="700">\n                <button type="submit" class="flex items-center justify-center gap-2 min-h-[44px] min-w-[200px] px-6 py-3 bg-gradient-to-r from-[#00899B] to-[#002F35] text-white text-base font-semibold rounded-2xl hover:shadow-lg transition-shadow mx-auto">\n                    <span class="material-icons-round text-xl">send</span>\n                    Lapor Sekarang\n                </button>\n            </div>\n        </form>\n    </div>\n</div>\n            ';case 20:if(u+="\n                </div>\n            </div>\n            ".concat((0,r.w)(),"\n        "),t.innerHTML=u,"/pelaporan/profile"!==n){e.next=25;break}return e.next=25,s.A.afterRender();case 25:(c=document.querySelector("#tanggalKejadian"))&&(d=new Date,p=new Date(d.toLocaleString("en-US",{timeZone:"Asia/Jakarta"})),f=p.getFullYear(),m=String(p.getMonth()+1).padStart(2,"0"),v=String(p.getDate()).padStart(2,"0"),h="".concat(f,"-").concat(m,"-").concat(v),c.value=h,c.max=h,c.min="2024-01-01");case 27:case"end":return e.stop()}}),e)})))()},initializeEventListeners:function(){var e=this,t=document.querySelector("#laporan-form"),n=document.querySelector("#fileInput"),a=document.querySelector("#dropZone"),r=document.querySelector("#jenisInfrastruktur"),o=document.querySelector("#infoIcon"),i=document.querySelector("#infraInfo"),s=document.querySelector(".browse-button"),u=document.querySelector("#alamatKejadian"),d=null;if(t&&t.addEventListener("submit",function(){var n=h(g().mark((function n(a){var r,o,i,s,u,c,p;return g().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a.preventDefault(),t.judul.value.trim()){n.next=5;break}return Swal.fire({title:"Peringatan!",text:"Judul Wajib diisi",icon:"warning",confirmButtonText:"OK",confirmButtonColor:"#00899B"}),t.judul.focus(),n.abrupt("return");case 5:if(t.deskripsi.value.trim()){n.next=9;break}return Swal.fire({title:"Peringatan!",text:"Deskripsi Wajib diisi",icon:"warning",confirmButtonText:"OK",confirmButtonColor:"#00899B"}),t.deskripsi.focus(),n.abrupt("return");case 9:if(t.jenisInfrastruktur.value){n.next=13;break}return Swal.fire({title:"Peringatan!",text:"Jenis Infrastruktur Wajib dipilih",icon:"warning",confirmButtonText:"OK",confirmButtonColor:"#00899B"}),t.jenisInfrastruktur.focus(),n.abrupt("return");case 13:if(t.alamatKejadian.value.trim()&&e.formData.latitude&&e.formData.longitude){n.next=17;break}return Swal.fire({title:"Peringatan!",text:"Alamat dan lokasi pada peta wajib ditentukan",icon:"warning",confirmButtonText:"OK",confirmButtonColor:"#00899B"}),t.alamatKejadian.focus(),n.abrupt("return");case 17:if(e.formData.lampiran){n.next=20;break}return Swal.fire({title:"Peringatan!",text:"Bukti Lampiran Wajib diunggah",icon:"warning",confirmButtonText:"OK",confirmButtonColor:"#00899B"}),n.abrupt("return");case 20:return n.prev=20,Swal.fire({title:"Mengirim laporan...",text:"Mohon tunggu sebentar",allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!1,didOpen:function(){Swal.showLoading()}}),(r=new FormData).append("judul",t.judul.value.trim()),r.append("deskripsi",t.deskripsi.value.trim()),r.append("jenis_infrastruktur",t.jenisInfrastruktur.value),r.append("tanggal_kejadian",t.tanggalKejadian.value),r.append("alamat",e.formData.alamat),r.append("latitude",e.formData.latitude),r.append("longitude",e.formData.longitude),r.append("bukti_lampiran",e.formData.lampiran),n.next=33,l.A.createReport(r);case 33:if(o=n.sent,Swal.close(),!o||"success"!==o.status){n.next=49;break}return n.next=38,Swal.fire({title:"Berhasil!",text:"Laporan Anda telah berhasil dikirim",icon:"success",confirmButtonText:"OK",confirmButtonColor:"#00899B"});case 38:if(t.reset(),(i=document.querySelector("#tanggalKejadian"))&&(s=new Date,u=s.getFullYear(),c=String(s.getMonth()+1).padStart(2,"0"),p=String(s.getDate()).padStart(2,"0"),i.value="".concat(u,"-").concat(c,"-").concat(p)),e.formData=f(f({},e.formData),{},{lampiran:null,latitude:null,longitude:null,alamat:""}),e.renderFileUpload(),!d){n.next=46;break}return n.next=46,d.initializeMap();case 46:window.location.href="/pelaporan/laporanaktif",n.next=50;break;case 49:throw new Error((null==o?void 0:o.message)||"Terjadi kesalahan saat mengirim laporan");case 50:n.next=58;break;case 52:return n.prev=52,n.t0=n.catch(20),Swal.close(),n.next=58,Swal.fire({title:"Error!",text:n.t0.message||"Terjadi kesalahan saat mengirim laporan. Silakan coba lagi.",icon:"error",confirmButtonText:"OK",confirmButtonColor:"#00899B"});case 58:case"end":return n.stop()}}),n,null,[[20,52]])})));return function(e){return n.apply(this,arguments)}}()),u){var p,m=document.getElementById("alamatSuggestions"),v=document.createElement("style");v.textContent="\n        #laporan-form { position: relative; z-index: 2; }\n        .address-input-wrapper { position: relative !important; z-index: 3 !important; }\n        #alamatSuggestions {\n          position: absolute !important;\n          left: 0 !important;\n          right: 0 !important;\n          top: 100% !important;\n          margin-top: 4px;\n          background: white;\n          border: 1px solid #e2e8f0;\n          border-radius: 0.5rem;\n          box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n          z-index: 4 !important;\n          max-height: 240px;\n          overflow-y: auto;\n        }\n        #alamatSuggestions:not(.hidden) { display: block !important; }\n        #locationMap, .leaflet-container, .map-container { z-index: 1 !important; }\n        .suggestion-item {\n          padding: 0.75rem;\n          cursor: pointer;\n          border-bottom: 1px solid #e2e8f0;\n          transition: background-color 0.2s ease;\n        }\n        .suggestion-item:hover { background-color: #f3f4f6; }\n        .suggestion-item:last-child { border-bottom: none; }\n      ",document.head.appendChild(v);var b=u.closest(".relative");b&&b.classList.add("address-input-wrapper");var x=function(){var t=h(g().mark((function t(n){var a,r;return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n&&!(n.length<3)){t.next=4;break}return m.classList.add("hidden"),t.abrupt("return");case 4:return m.classList.remove("hidden"),m.innerHTML='\n            <div class="suggestion-item">\n              <div class="flex items-center justify-center">\n                <span class="material-icons-round animate-spin mr-2">sync</span>\n                Mencari alamat...\n              </div>\n            </div>\n          ',t.next=8,fetch("https://nominatim.openstreetmap.org/search?format=json&q=".concat(encodeURIComponent(n),", Indonesia&limit=5&accept-language=id"),{headers:{"User-Agent":"UrbanAid App"}});case 8:if((a=t.sent).ok){t.next=11;break}throw new Error("Network response was not ok");case 11:return t.next=13,a.json();case 13:(r=t.sent)&&r.length>0?(m.innerHTML=r.map((function(e){return'\n                <div class="suggestion-item" \n                     data-lat="'.concat(e.lat,'" \n                     data-lon="').concat(e.lon,'"\n                     data-address="').concat(e.display_name,'">\n                  <div class="flex items-start">\n                    <span class="material-icons-round text-gray-400 mr-2 text-base">location_on</span>\n                    <span class="text-sm text-gray-700">').concat(e.display_name,"</span>\n                  </div>\n                </div>\n              ")})).join(""),m.querySelectorAll(".suggestion-item").forEach((function(t){t.addEventListener("click",(function(){var n=parseFloat(t.dataset.lat),a=parseFloat(t.dataset.lon),r=t.dataset.address;u.value=r,m.classList.add("hidden"),d&&d.updateMarker(n,a,r),e.formData=f(f({},e.formData),{},{latitude:n,longitude:a,alamat:r})}))}))):m.innerHTML='\n              <div class="suggestion-item text-center text-gray-500">\n                Lokasi tidak ditemukan\n              </div>\n            ',t.next=21;break;case 17:t.prev=17,t.t0=t.catch(0),m.innerHTML='\n            <div class="suggestion-item text-center text-red-500">\n              Terjadi kesalahan saat mencari alamat\n            </div>\n          ';case 21:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(e){return t.apply(this,arguments)}}();u.addEventListener("input",(function(e){var t=e.target.value.trim();clearTimeout(p),p=setTimeout((function(){return x(t)}),300)})),u.addEventListener("focus",(function(){var e=u.value.trim();e.length>=3&&x(e)})),document.addEventListener("click",(function(e){b.contains(e.target)||m.classList.add("hidden")}));var y=function(){var t=h(g().mark((function t(){var n,a,r;return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=document.createElement("div")).className="mt-4",n.innerHTML='\n          <div class="space-y-3" style="position: relative; z-index: 1;">\n            <div id="mapLoading">\n              <div class="flex items-center justify-center p-3 bg-gray-50 rounded-lg">\n                <span class="material-icons-round animate-spin text-gray-600 mr-2">sync</span>\n                <span class="text-sm text-gray-600">Memuat peta...</span>\n              </div>\n            </div>\n            <div id="locationMap" class="h-[400px] w-full rounded-lg border-2 border-gray-200 bg-gray-50"></div>\n            <div class="flex items-start space-x-2 text-sm text-gray-600">\n              <span class="material-icons-round text-base mt-0.5">info</span>\n              <p>Anda dapat mencari lokasi dengan memasukkan alamat atau klik langsung pada peta untuk menentukan lokasi yang tepat</p>\n            </div>\n          </div>\n        ',b.insertAdjacentElement("afterend",n),t.prev=4,(d=new c.A("locationMap")).setLocationSelectCallback((function(t){u.value=t.address,e.formData=f(f({},e.formData),{},{latitude:t.latitude,longitude:t.longitude,alamat:t.address})})),a=document.getElementById("mapLoading"),t.next=10,d.initializeMap();case 10:a.style.display="none",t.next=18;break;case 13:t.prev=13,t.t0=t.catch(4),(r=document.getElementById("mapLoading"))&&(r.innerHTML='\n              <div class="flex items-center justify-center p-3 bg-red-50 rounded-lg text-red-600">\n                <span class="material-icons-round mr-2">error</span>\n                <span class="text-sm">Gagal memuat peta</span>\n              </div>\n            ');case 18:case"end":return t.stop()}}),t,null,[[4,13]])})));return function(){return t.apply(this,arguments)}}();"loading"===document.readyState?document.addEventListener("DOMContentLoaded",(function(){return setTimeout(y,0)})):setTimeout(y,0)}if(n&&s&&(n.addEventListener("change",this.handleFileChange.bind(this)),s.addEventListener("click",(function(){return n.click()}))),a){var w=function(e){e.preventDefault(),e.stopPropagation()},k=function(e){return function(){a.classList.toggle("border-[#002F35]",e),a.classList.toggle("bg-[#00899B]/5",e)}};["dragenter","dragover","dragleave","drop"].forEach((function(e){a.addEventListener(e,w)})),["dragenter","dragover"].forEach((function(e){a.addEventListener(e,k(!0))})),["dragleave","drop"].forEach((function(e){a.addEventListener(e,k(!1))})),a.addEventListener("drop",(function(t){var a=t.dataTransfer.files[0];n&&e.validateFile(a)&&(n.files=t.dataTransfer.files,e.handleFileChange({target:n}))}))}if(r&&o&&i){var L=function(t){if(t){var n=e.infraInfo[t.toLowerCase().split(" ")[1]];if(n){var a=i.querySelector("div > div");if(a&&(a.textContent=n),window.innerWidth<768){i.style.position="fixed",i.style.top="50%",i.style.left="50%",i.style.transform="translate(-50%, -50%)",i.style.width="90%",i.style.maxWidth="400px";var r=document.createElement("div");r.id="infraBackdrop",r.className="fixed inset-0 bg-black bg-opacity-50 z-40",document.body.appendChild(r)}i.classList.remove("hidden"),i.offsetWidth,i.style.opacity="1"}}},E=function(){i.style.opacity="0",setTimeout((function(){i.classList.add("hidden"),window.innerWidth>=768&&(i.style.position="",i.style.top="",i.style.left="",i.style.transform="",i.style.width="");var e=document.getElementById("infraBackdrop");e&&e.remove()}),200)};window.matchMedia("(min-width: 768px)").matches&&(o.addEventListener("mouseenter",(function(){var e=r.value;e&&L(e)})),o.addEventListener("mouseleave",E)),o.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation();var t=r.value;t?L(t):Swal.fire({title:"Peringatan!",text:"Silakan pilih jenis infrastruktur terlebih dahulu",icon:"warning",confirmButtonText:"OK",confirmButtonColor:"#00899B"})})),document.addEventListener("click",(function(e){window.innerWidth<768&&(!document.getElementById("infraBackdrop")||i.contains(e.target)||o.contains(e.target)||E())}));var S=document.getElementById("closeInfraInfo");S&&S.addEventListener("click",(function(e){e.preventDefault(),E()}))}var j=function(){d&&d.map&&d.map.invalidateSize()};return window.addEventListener("resize",j),o&&o.setAttribute("title","Klik untuk melihat info lengkap"),function(){t&&t.removeEventListener("submit",e.handleSubmit),n&&n.removeEventListener("change",e.handleFileChange),a&&["dragenter","dragover","dragleave","drop"].forEach((function(e){a.removeEventListener(e,(function(){}))})),r&&r.removeEventListener("change",(function(){})),o&&(o.removeEventListener("mouseenter",(function(){})),o.removeEventListener("mouseleave",(function(){})),o.removeEventListener("click",(function(){}))),d&&d.cleanup(),window.removeEventListener("resize",j),u&&(u.removeEventListener("input",(function(){})),u.removeEventListener("focus",(function(){})));var i=document.getElementById("infraBackdrop");i&&i.remove(),e.addressDebounceTimer&&clearTimeout(e.addressDebounceTimer),e.searchDebounceTimer&&clearTimeout(e.searchDebounceTimer),d=null}},validateFile:function(e){return["image/jpeg","image/png"].includes(e.type)?!(e.size>5242880)||(Swal.fire({title:"File terlalu besar!",text:"Ukuran file tidak boleh lebih dari 5MB",icon:"error",confirmButtonText:"OK",confirmButtonColor:"#00899B"}),!1):(Swal.fire({title:"File tidak valid!",text:"File harus berformat JPEG atau PNG",icon:"error",confirmButtonText:"OK",confirmButtonColor:"#00899B"}),!1)},handleFileChange:function(e){var t=e.target.files[0];t&&this.validateFile(t)&&(this.formData.lampiran=t,this.updateFilePreview(t))},updateFilePreview:function(e){var t=this,n=document.querySelector(".upload-content");if(n){n.innerHTML='\n                <div class="flex flex-col sm:flex-row justify-between items-center gap-3 p-3 bg-white rounded-lg">\n                    <div class="flex items-center gap-3">\n                        <img src="'.concat(URL.createObjectURL(e),'" \n                             alt="preview" \n                             class="w-10 h-10 object-cover rounded">\n                        <div class="flex flex-col">\n                            <p class="font-semibold text-[#002F35] mb-1 text-sm">').concat(e.name,'</p>\n                            <p class="text-xs text-gray-600">').concat((e.size/1048576).toFixed(2),' MB</p>\n                        </div>\n                    </div>\n                    <button type="button" class="p-1 hover:bg-red-100 rounded transition-colors duration-200 remove-file">\n                        <i class="material-icons-round text-gray-600">delete</i>\n                    </button>\n                </div>\n            ');var a=n.querySelector(".remove-file");a&&a.addEventListener("click",(function(){t.formData.lampiran=null,t.renderFileUpload()}))}},renderFileUpload:function(){var e=document.querySelector(".upload-content");if(e){e.innerHTML='\n                <div class="mb-3">\n                    <span class="material-icons-round text-3xl text-[#00899B]">cloud_upload</span>\n                </div>\n                <div class="mb-3">\n                    <p class="font-semibold text-[#002F35] mb-1 text-sm">Drag and drop files or</p>\n                    <button type="button" class="text-[#00899B] font-semibold underline text-sm browse-button">Browse files</button>\n                </div>\n                <p class="text-xs text-gray-600">Supported formats: JPEG, PNG (Max 5MB)</p>\n            ';var t=e.querySelector(".browse-button"),n=document.querySelector("#fileInput");t&&n&&t.addEventListener("click",(function(){return n.click()}))}},submitReport:function(e){return h(g().mark((function t(){var n;return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.A.createReport(e);case 3:if("success"!==(n=t.sent).status){t.next=8;break}return t.abrupt("return",!0);case 8:throw new Error(n.message||"Terjadi kesalahan saat mengirim laporan");case 9:t.next=15;break;case 11:throw t.prev=11,t.t0=t.catch(0),new Error(t.t0.message||"Terjadi kesalahan saat mengirim laporan");case 15:case"end":return t.stop()}}),t,null,[[0,11]])})))()},cleanup:function(){var e=document.querySelector("#laporan-form"),t=document.querySelector("#fileInput"),n=document.querySelector("#dropZone"),a=document.querySelector("#jenisInfrastruktur"),r=document.querySelector("#infoIcon");e&&e.removeEventListener("submit",this.handleSubmit),t&&t.removeEventListener("change",this.handleFileChange),n&&(n.removeEventListener("dragover",(function(){})),n.removeEventListener("dragleave",(function(){})),n.removeEventListener("drop",(function(){}))),a&&a.removeEventListener("change",(function(){})),r&&(r.removeEventListener("mouseenter",(function(){})),r.removeEventListener("mouseleave",(function(){}))),AOS.refresh(),u.A.hide()}};t.A=b}}]);
//# sourceMappingURL=app~f1257215.bundle.js.map