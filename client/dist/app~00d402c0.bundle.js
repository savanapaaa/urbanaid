/*! For license information please see app~00d402c0.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkurbanaid=self.webpackChunkurbanaid||[]).push([[561],{32:function(t,e,n){n(2675),n(9463),n(6412),n(2259),n(5700),n(8125),n(8706),n(2008),n(113),n(8980),n(4423),n(3792),n(8598),n(2062),n(4782),n(9572),n(2010),n(4731),n(479),n(8130),n(9868),n(3851),n(1278),n(875),n(9432),n(287),n(6099),n(3362),n(7764),n(2762),n(3500),n(2953),n(3296),n(7208),n(8408);var r=n(7742),a=n(6296);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=i(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==i(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(){c=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function d(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{d({},"")}catch(t){d=function(t,e,n){return t[e]=n}}function p(t,e,n,r){var i=e&&e.prototype instanceof y?e:y,o=Object.create(i.prototype),s=new A(r||[]);return a(o,"_invoke",{value:F(t,n,s)}),o}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=p;var m="suspendedStart",h="suspendedYield",v="executing",x="completed",g={};function y(){}function b(){}function w(){}var k={};d(k,s,(function(){return this}));var L=Object.getPrototypeOf,B=L&&L(L(C([])));B&&B!==n&&r.call(B,s)&&(k=B);var j=w.prototype=y.prototype=Object.create(k);function S(t){["next","throw","return"].forEach((function(e){d(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function n(a,o,s,l){var c=f(t[a],t,o);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==i(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,s,l)}),(function(t){n("throw",t,s,l)})):e.resolve(d).then((function(t){u.value=t,s(u)}),(function(t){return n("throw",t,s,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(t,r){function a(){return new e((function(e,a){n(t,r,e,a)}))}return o=o?o.then(a,a):a()}})}function F(e,n,r){var a=m;return function(i,o){if(a===v)throw Error("Generator is already running");if(a===x){if("throw"===i)throw o;return{value:t,done:!0}}for(r.method=i,r.arg=o;;){var s=r.delegate;if(s){var l=_(s,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===m)throw a=x,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=v;var c=f(e,n,r);if("normal"===c.type){if(a=r.done?x:h,c.arg===g)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(a=x,r.method="throw",r.arg=c.arg)}}}function _(e,n){var r=n.method,a=e.iterator[r];if(a===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,_(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var i=f(a,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function C(e){if(e||""===e){var n=e[s];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(i(e)+" is not iterable")}return b.prototype=w,a(j,"constructor",{value:w,configurable:!0}),a(w,"constructor",{value:b,configurable:!0}),b.displayName=d(w,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,d(t,u,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},S(O.prototype),d(O.prototype,l,(function(){return this})),e.AsyncIterator=O,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new O(p(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},S(j),d(j,u,"Generator"),d(j,s,(function(){return this})),d(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=C,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return s.type="throw",s.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),P(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var a=r.arg;P(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:C(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function u(t,e,n,r,a,i,o){try{var s=t[i](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,a)}function d(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var i=t.apply(e,n);function o(t){u(i,r,a,o,s,"next",t)}function s(t){u(i,r,a,o,s,"throw",t)}o(void 0)}))}}var p=l(l(l(l(l(l(l(l(l({data:[],init:function(){var t=this;return d(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.render();case 2:t.initializeAOS();case 3:case"end":return e.stop()}}),e)})))()},initializeAOS:function(){"undefined"!=typeof AOS&&AOS.init({duration:1e3,once:!0,offset:50,delay:100})},render:function(){var t=this;return d(c().mark((function e(){var n,a,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.data.length){e.next=8;break}return e.next=4,r.A.getUserReports();case 4:if(n=e.sent){e.next=7;break}throw new Error("Data laporan tidak ditemukan");case 7:t.data=n;case 8:if(0!==(a=t.data.filter((function(t){return"pending"===t.status}))).length){e.next=11;break}return e.abrupt("return",'\n                    <div class="max-w-7xl mx-auto px-4 pt-6 pb-8">\n                        <h2 class="flex items-center justify-center gap-2 text-2xl font-bold text-gray-900 " data-aos="fade-up">\n                            <span class="material-icons-round text-[#00899B]">dashboard</span>\n                            Laporan Aktif\n                        </h2>\n                        \n                        <div class="text-center space-y-4" data-aos="fade-up">\n                            <div class="max-w-sm mx-auto mb-2">\n                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 500 500">\n                                    <style>\n                                        @keyframes float {\n                                            0% { transform: translateY(0px); }\n                                            50% { transform: translateY(-20px); }\n                                            100% { transform: translateY(0px); }\n                                        }\n                                        .float { animation: float 3s ease-in-out infinite; }\n                                    </style>\n                                    <rect width="500" height="500" fill="white"/>\n                                    <g class="float">\n                                        <path d="M150 210 L235 210 L255 240 L350 240 L350 370 L150 370 Z" fill="#00899B" opacity="0.2"/>\n                                        \n                                        <path d="M180 280 L320 280" stroke="#00899B" stroke-width="2" stroke-dasharray="8,8"/>\n                                        <path d="M180 310 L320 310" stroke="#00899B" stroke-width="2" stroke-dasharray="8,8"/>\n                                        <path d="M180 340 L320 340" stroke="#00899B" stroke-width="2" stroke-dasharray="8,8"/>\n                                        \n                                        <circle cx="250" cy="290" r="30" fill="#002F35"/>\n                                        <path d="M250 270 L250 310 M230 290 L270 290" stroke="white" stroke-width="3"/>\n                                    </g>\n                                    <path d="M150 420h200M200 440h100" stroke="#E0E0E0" stroke-width="3"/>\n                                </svg>\n                            </div>\n                            <h3 class="text-xl font-semibold text-gray-800">Belum Ada Laporan Aktif</h3>\n                            <p class="text-gray-600 max-w-md mx-auto">\n                                Saat ini Anda belum memiliki laporan yang sedang aktif. \n                                Buat laporan baru untuk melaporkan permasalahan infrastruktur di sekitar Anda.\n                            </p>\n                            <button onclick="window.location.href=\'/pelaporan\'" \n                                    class="inline-flex items-center px-6 py-3 bg-gradient-to-r from-[#00899B] to-[#002F35] text-white rounded-2xl hover:shadow-lg transition-all duration-300 transform hover:scale-105 font-semibold">\n                                <span class="material-icons-round mr-2">add_circle</span>\n                                Buat Laporan Baru\n                            </button>\n                        </div>\n                    </div>\n                ');case 11:return i='\n                <div class="max-w-7xl mx-auto px-4 py-8">\n                    <h2 class="flex items-center justify-center gap-2 text-2xl font-bold text-gray-900 mb-8" data-aos="fade-up">\n                        <span class="material-icons-round text-[#00899B]">dashboard</span>\n                        Laporan Aktif\n                    </h2>\n\n                    <div class="space-y-8">\n                        '.concat(a.map((function(e,n){return t.createReportCard(e,n)})).join(""),"\n                    </div>\n                </div>\n            "),setTimeout((function(){window.laporanAktif=t}),0),e.abrupt("return",i);case 16:return e.prev=16,e.t0=e.catch(0),e.abrupt("return",'\n                <div class="max-w-7xl mx-auto px-4 py-8 text-center" data-aos="fade-up">\n                    <p class="text-base text-red-600">Gagal memuat data laporan: '.concat(e.t0.message,"</p>\n                </div>\n            "));case 20:case"end":return e.stop()}}),e,null,[[0,16]])})))()},formatDate:function(t){return new Date(t).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},createReportCard:function(t,e){return'\n            <div class="group relative" data-aos="fade-up" data-aos-delay="'.concat(100*e,'">\n                <div class="absolute inset-0 bg-gradient-to-r from-[#00899B]/20 to-[#002F35]/20 rounded-3xl blur-2xl transform -rotate-1"></div>\n                <div class="relative bg-white/80 backdrop-blur-xl rounded-2xl p-8 md:p-10 shadow-xl mb-6">\n                    <div class="flex items-center mb-6">\n                        <span class="material-icons-round text-amber-600 mr-2 text-xl">schedule</span>\n                        <span class="bg-amber-100 text-amber-800 px-4 py-1 rounded-full text-sm font-semibold">\n                            Pending\n                        </span>\n                    </div>\n                    \n                    <div class="relative flex flex-col md:flex-row md:gap-6">\n                        <div class="flex-grow order-1 md:order-none">\n                            <div class="space-y-4">\n                                <h3 class="text-xl font-semibold text-gray-900">').concat(t.judul,'</h3>\n                                \n                                <div class="flex items-center text-gray-700  duration-300">\n                                    <span class="material-icons-round text-[#00899B] text-base mr-2">account_balance</span>\n                                    <span class="text-base">').concat(t.jenis_infrastruktur,'</span>\n                                </div>\n                                \n                                <div class="flex items-center text-gray-700  duration-300">\n                                    <span class="material-icons-round text-[#00899B] text-base mr-2">event</span>\n                                    <span class="text-base">').concat(this.formatDate(t.tanggal_kejadian),'</span>\n                                </div>\n                                \n                                <div class="flex items-center text-gray-700 line-clamp-2 duration-300">\n                                    <span class="material-icons-round text-[#00899B] text-base mr-2">location_on</span>\n                                    <span class="text-base line-clamp-2">').concat(t.alamat,'</span>\n                                </div>\n                                \n                                <div class="text-gray-700 line-clamp-2  duration-300">\n                                    <span class="material-icons-round text-[#00899B] text-base mr-2 align-text-top">description</span>\n                                    ').concat(t.deskripsi,'\n                                </div>\n                            </div>\n                        </div>\n                        \n                        <div class="order-2 mt-6 md:mt-0 flex items-center gap-3">\n                            <button onclick="laporanAktif.deleteReport(').concat(t.id,')"\n                                class="flex items-center justify-center min-h-[44px] min-w-[44px] p-2 bg-red-100 text-red-800 rounded-xl hover:bg-red-200 transition-colors duration-300 transform hover:scale-105">\n                                <span class="material-icons-round text-xl">delete</span>\n                            </button>\n                            <button onclick="laporanAktif.showDetail(').concat(t.id,')"\n                                class="flex items-center justify-center min-h-[44px] min-w-[44px] p-2 bg-gradient-to-r from-[#00899B] to-[#002F35] text-white rounded-xl hover:shadow-lg transition-all duration-300 transform hover:scale-105">\n                                <span class="material-icons-round text-xl">visibility</span>\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        ')}},"initializeAOS",(function(){AOS.init({duration:1e3,once:!0,offset:50,delay:100})})),"initializeVanillaTilt",(function(){document.querySelectorAll("[data-tilt]").forEach((function(t){VanillaTilt.init(t,{max:2,speed:400,perspective:500,scale:1.02,transition:!0,"full-page-listening":!0})}))})),"deleteReport",(function(t){var e=this;return d(c().mark((function n(){var a;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,a=e.data.find((function(e){return e.id===t}))){n.next=4;break}throw new Error("Laporan tidak ditemukan");case 4:return n.next=6,Swal.fire({title:"Hapus Laporan",text:'Apakah Anda yakin ingin menghapus laporan "'.concat(a.judul,'"?'),icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Ya, Hapus!",cancelButtonText:"Batal",customClass:{popup:"rounded-xl"}});case 6:if(n.sent.isConfirmed){n.next=9;break}return n.abrupt("return");case 9:return Swal.fire({title:"Sedang Menghapus...",allowOutsideClick:!1,didOpen:function(){Swal.showLoading()}}),n.next=12,r.A.deleteReport(t);case 12:e.data=e.data.filter((function(e){return e.id!==t})),Swal.fire({title:"Berhasil!",text:"Laporan berhasil dihapus.",icon:"success",timer:2e3,showConfirmButton:!1,customClass:{popup:"rounded-xl"}}).then((function(){window.location.reload()})),n.next=19;break;case 16:n.prev=16,n.t0=n.catch(0),Swal.fire({title:"Gagal!",text:n.t0.message||"Terjadi kesalahan saat menghapus laporan",icon:"error",timer:2e3,showConfirmButton:!1,customClass:{popup:"rounded-xl"}});case 19:case"end":return n.stop()}}),n,null,[[0,16]])})))()})),"editReport",(function(t){var e=this;return d(c().mark((function n(){var a,i,o,l,u,d;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,a=e.data.find((function(e){return e.id===t}))){n.next=4;break}return n.abrupt("return");case 4:return n.next=6,Swal.fire({title:"Edit Laporan",html:'\n                    <div class="space-y-4">\n                        '.concat(e.createFormField('<div class="flex items-center ml-4">\n                                <span class="material-icons-round text-[#00899B] mr-2">title</span>\n                                <span class="text-base text-gray-700">Judul Laporan</span>\n                            </div>','<input name="swal-judul" class="w-full px-4 py-2 text-base text-gray-900 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#00899B] focus:border-[#00899B]" \n                                    value="'.concat(a.judul,'">')),"\n                        \n                        ").concat(e.createFormField('<div class="flex items-center ml-4">\n                                <span class="material-icons-round text-[#00899B] mr-2">account_balance</span>\n                                <span class="text-base text-gray-700">Jenis Infrastruktur</span>\n                            </div>','<select name="swal-infrastruktur" class="w-full px-3 py-2 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500">\n                                <option value="Infrastruktur Perkotaan" '.concat("Infrastruktur Perkotaan"===a.jenis_infrastruktur?"selected":"",'>\n                                    Infrastruktur Perkotaan\n                                </option>\n                                <option value="Infrastruktur Lingkungan" ').concat("Infrastruktur Lingkungan"===a.jenis_infrastruktur?"selected":"",'>\n                                    Infrastruktur Lingkungan\n                                </option>\n                                <option value="Infrastruktur Sosial" ').concat("Infrastruktur Sosial"===a.jenis_infrastruktur?"selected":"",">\n                                    Infrastruktur Sosial\n                                </option>\n                            </select>")),"\n    \n                        ").concat(e.createFormField('<div class="flex items-center ml-4">\n                                <span class="material-icons-round text-[#00899B] mr-2">event</span>\n                                <span class="ml-1">Tanggal Kejadian</span>\n                            </div>','<input type="date" name="swal-tanggal" class="w-full px-3 py-2 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500" \n                                    value="'.concat(a.tanggal_kejadian.split("T")[0],'">')),"\n    \n                        ").concat(e.createFormField('<div class="flex items-center ml-4">\n                                <span class="material-icons-round text-[#00899B] mr-2">location_on</span>\n                                <span class="ml-1">Alamat Lengkap</span>\n                            </div>','<input name="swal-alamat" class="w-full px-3 py-2 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500" \n                                    value="'.concat(a.alamat,'">')),"\n    \n                        ").concat(e.createFormField('<div class="flex items-center ml-4">\n                                <span class="material-icons-round text-[#00899B] mr-2">description</span>\n                                <span class="ml-1">Deskripsi Masalah</span>\n                            </div>','<textarea name="swal-deskripsi" class="w-full px-3 py-2 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 min-h-[100px]">'.concat(a.deskripsi,"</textarea>")),"\n    \n                        ").concat(e.createFormField('<div class="flex items-center ml-4">\n                                <span class="material-icons-round text-[#00899B] mr-2">image</span>\n                                <span class="ml-1">Bukti Lampiran</span>\n                            </div>','<div class="space-y-2">\n                                <label class="flex items-center justify-center text-center px-3 py-3 bg-gray-50 text-gray-700 rounded-lg border border-gray-300 cursor-pointer hover:bg-gray-100">\n                                    <input type="file" name="swal-lampiran" accept="image/*" class="hidden">\n                                    <div class="flex items-center justify-center w-full">\n                                        <span class="material-icons-round text-[#00899B] mr-2">upload_file</span>\n                                        <span class="text-base text-center">Pilih File Baru</span>\n                                    </div>\n                                </label>\n                                <div class="text-sm text-gray-500 text-center">\n                                    File saat ini: '.concat(a.bukti_lampiran,'\n                                </div>\n                                <div id="file-preview" class="mt-2"></div>\n                            </div>')),"\n                    </div>\n                "),width:"800px",showCancelButton:!0,confirmButtonText:"Simpan",cancelButtonText:"Batal",customClass:{popup:"rounded-xl",title:"text-3xl font-bold text-gray-900 mb-4"},showCloseButton:!0,didRender:function(){var t=document.querySelector('input[name="swal-lampiran"]'),n=document.getElementById("file-preview");t&&t.addEventListener("change",(function(t){var r=t.target.files[0];e.validateFile(r)?n&&(n.innerHTML='\n                                    <div class="file-preview flex items-center bg-gray-50 p-2 rounded-lg">\n                                        <img src="'.concat(URL.createObjectURL(r),'" \n                                             alt="preview" \n                                             class="lazyload w-16 h-16 object-cover rounded-md mr-3">\n                                             loading="lazy"\n                                        <div>\n                                            <p class="text-sm font-medium">').concat(r.name,'</p>\n                                            <p class="text-xs text-gray-500">').concat((r.size/1048576).toFixed(2)," MB</p>\n                                        </div>\n                                    </div>\n                                ")):t.target.value=""}))},preConfirm:function(){var t=document.querySelector('input[name="swal-lampiran"]'),n=document.querySelector('input[name="swal-judul"]').value.trim(),r=document.querySelector('select[name="swal-infrastruktur"]').value,i=document.querySelector('input[name="swal-tanggal"]').value,o=document.querySelector('input[name="swal-alamat"]').value.trim(),s=document.querySelector('textarea[name="swal-deskripsi"]').value.trim();if(!n)return Swal.showValidationMessage("Judul laporan harus diisi"),!1;if(!o)return Swal.showValidationMessage("Alamat harus diisi"),!1;if(!s)return Swal.showValidationMessage("Deskripsi masalah harus diisi"),!1;var l=new FormData;if(l.append("judul",n),l.append("jenis_infrastruktur",r),l.append("tanggal_kejadian",i),l.append("alamat",o),l.append("deskripsi",s),t.files.length>0){var c=t.files[0];if(!e.validateFile(c))return!1;l.append("bukti_lampiran",c)}else l.append("bukti_lampiran",a.bukti_lampiran);return l}});case 6:if(i=n.sent,o=i.value){n.next=10;break}return n.abrupt("return");case 10:return Swal.fire({title:"Sedang Memperbarui...",allowOutsideClick:!1,didOpen:function(){Swal.showLoading()}}),n.next=13,r.A.updateReport(t,o);case 13:if(l=n.sent,-1!==(u=e.data.findIndex((function(e){return e.id===t})))&&(e.data[u]=s(s({},e.data[u]),l)),!(d=document.querySelector(".main-content"))){n.next=21;break}return n.next=20,e.render();case 20:d.innerHTML=n.sent;case 21:Swal.fire({title:"Berhasil!",text:"Laporan berhasil diperbarui.",icon:"success",timer:2e3,showConfirmButton:!1,customClass:{popup:"rounded-xl"}}),n.next=27;break;case 24:n.prev=24,n.t0=n.catch(0),Swal.fire({title:"Gagal!",text:n.t0.message||"Terjadi kesalahan saat memperbarui laporan",icon:"error",timer:2e3,showConfirmButton:!1,customClass:{popup:"rounded-xl"}});case 27:case"end":return n.stop()}}),n,null,[[0,24]])})))()})),"validateFile",(function(t){return["image/jpeg","image/png"].includes(t.type)?!(t.size>5242880)||(Swal.fire({title:"File terlalu besar!",text:"Ukuran file tidak boleh lebih dari 5MB",icon:"error",confirmButtonText:"OK",confirmButtonColor:"#00899B"}),!1):(Swal.fire({title:"File tidak valid!",text:"File harus berformat JPEG atau PNG",icon:"error",confirmButtonText:"OK",confirmButtonColor:"#00899B"}),!1)})),"createModalContent",(function(t,e){return'\n            <div class="bg-white rounded-xl">\n                <div class="border-b border-gray-200 p-4">\n                    <h3 class="text-lg font-semibold text-gray-800">'.concat(t,'</h3>\n                </div>\n                <div class="p-4">\n                    ').concat(e,"\n                </div>\n            </div>\n        ")})),"createFormField",(function(t,e){return'\n            <div class="mb-6 last:mb-0">\n                <div class="text-sm font-medium text-gray-700 mb-2">'.concat(t,"</div>\n                ").concat(e,"\n            </div>\n        ")})),"showDetail",(function(t){var e=this;return d(c().mark((function n(){var r;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.data.find((function(e){return e.id===t}))){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,Swal.fire({title:r.judul,html:'\n    <div class="space-y-6">\n        '.concat(e.createFormField('<div class="flex items-center ml-4">\n                <span class="material-icons-round text-[#00899B] mr-2">schedule</span>\n                <span class="ml-1">Status Laporan</span>\n            </div>','<div class="flex items-center bg-amber-100 text-amber-800 px-3 py-2 rounded-lg text-base border border-gray-200 text-justify">\n                Pending\n            </div>'),"\n    \n        ").concat(e.createFormField('<div class="flex items-center ml-4">\n                <span class="material-icons-round text-[#00899B] mr-2">account_balance</span>\n                <span class="ml-1">Jenis Infrastruktur</span>\n            </div>','<div class="flex items-center bg-gray-50 px-3 py-2 rounded-lg text-base text-gray-700 border border-gray-200 text-justify">\n                '.concat(r.jenis_infrastruktur,"\n            </div>")),"\n    \n        ").concat(e.createFormField('<div class="flex items-center ml-4">\n                <span class="material-icons-round text-[#00899B] mr-2">event</span>\n                <span class="ml-1">Tanggal Kejadian</span>\n            </div>','<div class="flex items-center bg-gray-50 px-3 py-2 rounded-lg text-base text-gray-700 border border-gray-200">\n                '.concat(e.formatDate(r.tanggal_kejadian),"\n            </div>")),"\n    \n        ").concat(e.createFormField('<div class="flex items-center ml-4">\n                <span class="material-icons-round text-[#00899B] mr-2">location_on</span>\n                <span class="ml-1">Lokasi Kejadian</span>\n            </div>','<div class="flex items-center bg-gray-50 px-3 py-2 rounded-lg text-base text-gray-700 border border-gray-200 text-justify">\n                '.concat(r.alamat,"\n            </div>")),"\n    \n        ").concat(e.createFormField('<div class="flex items-center ml-4">\n                <span class="material-icons-round text-[#00899B] mr-2">description</span>\n                <span class="ml-1">Deskripsi Masalah</span>\n            </div>','<div class="flex items-center bg-gray-50 px-3 py-2 rounded-lg text-base text-gray-700 border border-gray-200 text-justify line-clamp-3">\n                '.concat(r.deskripsi,"\n            </div>")),"\n\n            ").concat(e.createFormField('<div class="flex items-center ml-4">\n                <span class="material-icons-round text-[#00899B] mr-2">map</span>\n                <span class="ml-1">Lokasi pada Peta</span>\n            </div>','<div class="w-full h-[400px] mt-4 rounded-lg overflow-hidden" id="detailReportMap"></div>'),"\n\n        ").concat(e.createFormField('<div class="flex items-center ml-4">\n                <span class="material-icons-round text-[#00899B] mr-2">image</span>\n                <span class="ml-1">Bukti Lampiran</span>\n            </div>','<div class="bg-gray-50 rounded-lg overflow-hidden">\n                <img src="'.concat(r.bukti_lampiran,'" alt="Bukti Lampiran" \n                    class="lazyload w-full h-auto object-cover"\n                    onerror="this.src=\'/api/placeholder/800/400\';this.onerror=null;"\n                    loading="lazy">\n            </div>')),"\n    \n\n    </div>\n            "),width:"800px",showCloseButton:!0,showConfirmButton:!1,customClass:{popup:"rounded-xl",title:"text-3xl font-bold text-gray-900 mb-4"},didOpen:function(){if("undefined"!=typeof L&&r.latitude&&r.longitude){var t=L.map("detailReportMap").setView([r.latitude,r.longitude],15);L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors"}).addTo(t),L.marker([r.latitude,r.longitude]).addTo(t).bindPopup(r.alamat).openPopup()}}});case 5:case"end":return n.stop()}}),n)})))()})),"cleanup",(function(){this.data=[],window.laporanAktif=null,AOS.refresh(),a.A.hide()}));window.laporanAktif=p,e.A=p}}]);
//# sourceMappingURL=app~00d402c0.bundle.js.map